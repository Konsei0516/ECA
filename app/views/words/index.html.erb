<%= render 'link/header'%>
<div class="main__index">
  <h2>＜ーーWord 投稿一覧ーー＞</h2>
</div>

<div class="word__main">
<%= render "search" %>
  <div class="word__main__box">
    <div class="container">
      <div class="index__rank">
        <h2>ーーーーー いいねランキング ーーーーー</h2>
      </div>
      <%= render "like_rank"%>
      <h2>ーーーーーーー 新着 ーーーーーーーー</h2>
      <div class="word__wrapper">
        <% @words.each do |word| %>
        <div class="word__wrapper__card" >
          <div class= "word__wrapper__card__title">
            <%= link_to word.name, word_path(word) %>
          </div>
          <div class="word__wrapper__card__description">
            <%= link_to word.description, word_path(word) %>
          </div>
          <div class="word__wrapper__card__name">
            <%= link_to word.user.name, user_path(word.user_id) %>
          </div>
          <div class="word__wrapper__card__category">
            <%= word.category %>
          </div>
          <div id="likes_buttons_<%= word.id %>">
            <%= render partial: 'likes/like', locals: { word: word, likes: @likes} %>
          </div>
          <div class ="word__wrapper__card__btn">
          <% if current_user.id == word.user.id %>
            <%= link_to '編集', edit_word_path(word), class: 'btn btn-success' %>
            <%= link_to '削除', word, method: :delete, data:{ confirm: "タスク「#{word.name}」を削除します。よろしいですか？" }, class: 'btn btn-danger delete' %>
          <% end %>
          </div>
          <div class="card-footer">
            <%= render partial: 'tags', locals: { tags: word.tags }%>
          </div>
        </div>
      <% end %>
      </div>
      <div class="tag_list">
      <h5 class="tag_list__title">タグ一覧</h5>
        <div class="tag_list__content">
          <% @tags.each do |tag| %>
            <span class="badge badge-info">
              <%= link_to tag.name, tag_index_words_path(tag_name: tag.name), class: "text-white" %> 
              <%= "(#{tag.taggings_count})"%>
            </span>
          <% end %>
        </div>
      </div>
    </div>
    <%= paginate(@words) %>
  </div>
</div>
<%= render 'link/word'%>
